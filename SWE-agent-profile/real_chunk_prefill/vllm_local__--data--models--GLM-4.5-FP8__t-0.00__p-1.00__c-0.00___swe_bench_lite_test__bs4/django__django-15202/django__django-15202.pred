{"model_name_or_path": "vllm_local__--data--models--GLM-4.5-FP8__t-0.00__p-1.00__c-0.00___swe_bench_lite_test__bs4", "instance_id": "django__django-15202", "model_patch": "diff --git a/django/core/validators.py b/django/core/validators.py\nindex 72fbe15551..eb33e603df 100644\n--- a/django/core/validators.py\n+++ b/django/core/validators.py\n@@ -127,7 +127,10 @@ class URLValidator(RegexValidator):\n                 raise\n         else:\n             # Now verify IPv6 in the netloc part\n-            host_match = re.search(r'^\\[(.+)\\](?::\\d{1,5})?$', urlsplit(value).netloc)\n+            try:\n+                host_match = re.search(r'^\\\\[(.+)\\\\](?::\\\\d{1,5})?$', urlsplit(value).netloc)\n+            except ValueError:\n+                raise ValidationError(self.message, code=self.code, params={'value': value})\n             if host_match:\n                 potential_ip = host_match[1]\n                 try:\n@@ -139,7 +142,11 @@ class URLValidator(RegexValidator):\n         # section 3.1. It's defined to be 255 bytes or less, but this includes\n         # one byte for the length of the name and one byte for the trailing dot\n         # that's used to indicate absolute names in DNS.\n-        if len(urlsplit(value).hostname) > 253:\n+        try:\n+            hostname = urlsplit(value).hostname\n+        except ValueError:\n+            raise ValidationError(self.message, code=self.code, params={'value': value})\n+        if hostname and len(hostname) > 253:\n             raise ValidationError(self.message, code=self.code, params={'value': value})\n \n \ndiff --git a/test_edge_case.py b/test_edge_case.py\nnew file mode 100644\nindex 0000000000..5396b93e81\n--- /dev/null\n+++ b/test_edge_case.py\n@@ -0,0 +1,84 @@\n+#!/usr/bin/env python\n+import os\n+import sys\n+import django\n+from django.conf import settings\n+\n+# Configure Django settings\n+if not settings.configured:\n+    settings.configure(\n+        DEBUG=True,\n+        USE_TZ=True,\n+    )\n+    django.setup()\n+\n+from django.core.validators import URLValidator\n+from urllib.parse import urlsplit\n+import re\n+\n+def test_problematic_url():\n+    # Let's try to create a URL that would pass initial validation\n+    # but still cause urlsplit to raise ValueError later\n+    \n+    # The issue might be with URLs that have invalid IPv6 format\n+    # Let's try various malformed IPv6 URLs\n+    \n+    test_urls = [\n+        'http://[]',  # Empty IPv6 brackets\n+        'http://[',   # Open bracket only\n+        'http://]',   # Close bracket only\n+        'http://[::]',  # This should be valid\n+        'http://[::1]::',  # Invalid port format\n+        'http://[invalid-ipv6-url]:abc',  # Invalid port\n+        'http://[::1]:',  # Empty port\n+        'http://[::1]:abc',  # Invalid port\n+        'http://[::1]::8080',  # Double colon in port\n+        'http://[::1]:8080:9090',  # Multiple ports\n+    ]\n+    \n+    for url in test_urls:\n+        print(f\"\\n=== Testing URL: '{url}' ===\")\n+        \n+        # Test urlsplit directly\n+        print(\"1. urlsplit(value):\")\n+        try:\n+            result = urlsplit(url)\n+            print(f\"   Success: scheme='{result.scheme}', netloc='{result.netloc}', hostname='{result.hostname}'\")\n+        except ValueError as e:\n+            print(f\"   ValueError: {e}\")\n+        \n+        # Test the specific line that's problematic\n+        print(\"2. urlsplit(value).netloc (line 130 equivalent):\")\n+        try:\n+            netloc = urlsplit(url).netloc\n+            print(f\"   Success: netloc='{netloc}'\")\n+            \n+            # Test the regex search\n+            host_match = re.search(r'^\\[(.+)\\](?::\\d{1,5})?$', netloc)\n+            print(f\"   host_match: {host_match}\")\n+        except ValueError as e:\n+            print(f\"   ValueError: {e}\")\n+        \n+        # Test the hostname access\n+        print(\"3. urlsplit(value).hostname (line 142 equivalent):\")\n+        try:\n+            hostname = urlsplit(url).hostname\n+            print(f\"   Success: hostname='{hostname}'\")\n+        except ValueError as e:\n+            print(f\"   ValueError: {e}\")\n+        \n+        # Test the full validator\n+        print(\"4. Full URLValidator:\")\n+        try:\n+            validator = URLValidator()\n+            validator(url)\n+            print(\"   Success\")\n+        except ValueError as e:\n+            print(f\"   ValueError (BUG): {e}\")\n+            import traceback\n+            traceback.print_exc()\n+        except Exception as e:\n+            print(f\"   Other exception: {type(e).__name__}: {e}\")\n+\n+if __name__ == \"__main__\":\n+    test_problematic_url()\n\\ No newline at end of file\n"}