{"model_name_or_path": "vllm_local__--data--models--GLM-4.5-FP8__t-0.00__p-1.00__c-0.00___swe_bench_lite_test__bs4", "instance_id": "django__django-14730", "model_patch": "diff --git a/django/db/models/fields/related.py b/django/db/models/fields/related.py\nindex febaadbb5b..145d2b86a7 100644\n--- a/django/db/models/fields/related.py\n+++ b/django/db/models/fields/related.py\n@@ -1206,6 +1206,9 @@ class ManyToManyField(RelatedField):\n \n         self.db_table = db_table\n         self.swappable = swappable\n+        \n+        # Store the original user-provided related_name for validation\n+        self._user_provided_related_name = related_name\n \n     def check(self, **kwargs):\n         return [\n@@ -1214,6 +1217,7 @@ class ManyToManyField(RelatedField):\n             *self._check_relationship_model(**kwargs),\n             *self._check_ignored_options(**kwargs),\n             *self._check_table_uniqueness(**kwargs),\n+            *self._check_symmetrical_related_name(**kwargs),\n         ]\n \n     def _check_unique(self, **kwargs):\n@@ -1453,6 +1457,36 @@ class ManyToManyField(RelatedField):\n \n         return errors\n \n+    def _check_symmetrical_related_name(self, **kwargs):\n+        \"\"\"\n+        Check that related_name is not used with symmetrical ManyToManyFields.\n+        \n+        For symmetrical relationships, the related field on the target model\n+        is not created, so using related_name is confusing and should be prevented.\n+        \n+        The exception is related_name='+', which explicitly disables the reverse\n+        relation and is allowed even on symmetrical fields.\n+        \"\"\"\n+        errors = []\n+        \n+        # Check if the relation is symmetrical\n+        if self.remote_field.symmetrical:\n+            # Check if a related_name was provided by the user\n+            # Allow related_name='+' since it explicitly disables reverse relation\n+            if (self._user_provided_related_name is not None and \n+                self._user_provided_related_name != '+'):\n+                errors.append(\n+                    checks.Error(\n+                        \"'related_name' cannot be set on a symmetrical ManyToManyField.\",\n+                        hint=\"Symmetrical ManyToManyFields do not create a reverse \"\n+                             \"relation, so 'related_name' has no effect.\",\n+                        obj=self,\n+                        id='fields.E335',\n+                    )\n+                )\n+        \n+        return errors\n+\n     def _check_table_uniqueness(self, **kwargs):\n         if isinstance(self.remote_field.through, str) or not self.remote_field.through._meta.managed:\n             return []\n"}