{"model_name_or_path": "vllm_local__--data--models--GLM-4.5-FP8__t-0.00__p-1.00__c-0.00___swe_bench_lite_test__bs32", "instance_id": "django__django-16820", "model_patch": "diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py\nindex b89b6b511b..798b0e56b8 100644\n--- a/django/db/migrations/operations/models.py\n+++ b/django/db/migrations/operations/models.py\n@@ -187,14 +187,38 @@ class CreateModel(ModelOperation):\n             isinstance(operation, AlterTogetherOptionOperation)\n             and self.name_lower == operation.name_lower\n         ):\n+            new_options = {**self.options, **{operation.option_name: operation.option_value}}\n+            \n+            # Special handling for index_together -> indexes transition\n+            if (\n+                isinstance(operation, AlterIndexTogether) \n+                and operation.option_value == set()  # Removing index_together\n+                and 'index_together' in self.options \n+                and self.options['index_together']  # Has existing index_together\n+            ):\n+                # Convert index_together to indexes to remove deprecation warnings\n+                from django.db.models import Index\n+                \n+                existing_index_together = self.options['index_together']\n+                indexes = list(new_options.get('indexes', []))\n+                \n+                # Convert each index_together tuple to an Index\n+                for fields in existing_index_together:\n+                    index_name = '%s_%s' % (\n+                        self.name_lower,\n+                        '_'.join(fields)\n+                    )\n+                    indexes.append(Index(fields=list(fields), name=index_name))\n+                \n+                new_options['indexes'] = indexes\n+                # Remove index_together since we've converted it to indexes\n+                new_options.pop('index_together', None)\n+            \n             return [\n                 CreateModel(\n                     self.name,\n                     fields=self.fields,\n-                    options={\n-                        **self.options,\n-                        **{operation.option_name: operation.option_value},\n-                    },\n+                    options=new_options,\n                     bases=self.bases,\n                     managers=self.managers,\n                 ),\n@@ -303,6 +327,35 @@ class CreateModel(ModelOperation):\n                         managers=self.managers,\n                     ),\n                 ]\n+        elif (\n+            isinstance(operation, AddIndex)\n+            and self.name_lower == operation.model_name_lower\n+        ):\n+            # Only merge AddIndex if it's redundant due to index_together -> indexes conversion\n+            new_options = self.options.copy()\n+            indexes = list(new_options.get('indexes', []))\n+            \n+            # Check if an equivalent index already exists (from index_together conversion)\n+            index_fields = tuple(operation.index.fields)\n+            existing_index = None\n+            \n+            for existing_idx in indexes:\n+                if tuple(existing_idx.fields) == index_fields:\n+                    existing_index = existing_idx\n+                    break\n+            \n+            if existing_index is not None:\n+                # Equivalent index exists, the AddIndex is redundant\n+                return [\n+                    CreateModel(\n+                        self.name,\n+                        fields=self.fields,\n+                        options=new_options,\n+                        bases=self.bases,\n+                        managers=self.managers,\n+                    ),\n+                ]\n+            # Otherwise, don't merge - let the AddIndex remain as a separate operation\n         return super().reduce(operation, app_label)\n \n \n"}