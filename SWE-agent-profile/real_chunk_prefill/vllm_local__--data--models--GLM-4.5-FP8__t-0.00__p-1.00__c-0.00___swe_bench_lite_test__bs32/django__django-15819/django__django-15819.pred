{"model_name_or_path": "vllm_local__--data--models--GLM-4.5-FP8__t-0.00__p-1.00__c-0.00___swe_bench_lite_test__bs32", "instance_id": "django__django-15819", "model_patch": "diff --git a/django/core/management/commands/inspectdb.py b/django/core/management/commands/inspectdb.py\nindex f33bcbdccf..1a1363d0d1 100644\n--- a/django/core/management/commands/inspectdb.py\n+++ b/django/core/management/commands/inspectdb.py\n@@ -133,6 +133,8 @@ class Command(BaseCommand):\n                 known_models.append(table2model(table_name))\n                 used_column_names = []  # Holds column names used in the table so far\n                 column_to_field_name = {}  # Maps column names to names of model fields\n+                table_references = {}  # Track references to models within this table: ref_model -> [field_names]\n+                field_descs = []  # Collect field descriptions to process related_names after all columns are analyzed\n                 for row in table_description:\n                     comment_notes = (\n                         []\n@@ -182,6 +184,11 @@ class Command(BaseCommand):\n                             if ref_db_table == table_name\n                             else table2model(ref_db_table)\n                         )\n+                        \n+                        # Track references to detect multiple FKs to same model\n+                        if rel_to not in table_references:\n+                            table_references[rel_to] = []\n+                        table_references[rel_to].append(att_name)\n                         if rel_to in known_models:\n                             field_type = \"%s(%s\" % (rel_type, rel_to)\n                         else:\n@@ -233,7 +240,41 @@ class Command(BaseCommand):\n                     field_desc += \")\"\n                     if comment_notes:\n                         field_desc += \"  # \" + \" \".join(comment_notes)\n+                    \n+                    # Store field description along with metadata for related_name processing\n+                    field_descs.append({\n+                        'desc': field_desc,\n+                        'att_name': att_name,\n+                        'is_relation': is_relation,\n+                        'rel_to': rel_to if is_relation else None,\n+                        'extra_params': extra_params.copy() if is_relation else {}\n+                    })\n+                \n+                # Process field descriptions to add related_name where needed\n+                # Determine which models have multiple references\n+                models_with_multiple_refs = {\n+                    rel_model for rel_model, fields in table_references.items() \n+                    if len(fields) > 1\n+                }\n+                \n+                # Yield field descriptions, adding related_name where needed\n+                for field_info in field_descs:\n+                    field_desc = field_info['desc']\n+                    \n+                    # Add related_name to all fields that reference models with multiple references\n+                    if (field_info['is_relation'] and \n+                        field_info['rel_to'] in models_with_multiple_refs and\n+                        'related_name' not in field_info['extra_params']):\n+                        \n+                        # Insert related_name into the field description\n+                        if field_desc.endswith(')'):\n+                            # Insert before the closing parenthesis\n+                            insert_pos = field_desc.rfind(')')\n+                            related_name_part = f\", related_name='{field_info['att_name']}'\"\n+                            field_desc = field_desc[:insert_pos] + related_name_part + field_desc[insert_pos:]\n+                    \n                     yield \"    %s\" % field_desc\n+                \n                 is_view = any(\n                     info.name == table_name and info.type == \"v\" for info in table_info\n                 )\n"}